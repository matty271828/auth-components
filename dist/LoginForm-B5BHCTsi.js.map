{"version":3,"file":"LoginForm-B5BHCTsi.js","sources":["../src/components/ui/checkbox.tsx","../src/components/LoginForm.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { CheckIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Checkbox({\n  className,\n  ...props\n}: React.ComponentProps<typeof CheckboxPrimitive.Root>) {\n  return (\n    <CheckboxPrimitive.Root\n      data-slot=\"checkbox\"\n      className={cn(\n        \"peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <CheckboxPrimitive.Indicator\n        data-slot=\"checkbox-indicator\"\n        className=\"flex items-center justify-center text-current transition-none\"\n      >\n        <CheckIcon className=\"size-3.5\" />\n      </CheckboxPrimitive.Indicator>\n    </CheckboxPrimitive.Root>\n  )\n}\n\nexport { Checkbox }\n","\"use client\"\n\nimport type React from \"react\"\n\nimport { useState } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Checkbox } from \"@/components/ui/checkbox\"\nimport { Eye, EyeOff, Loader2 } from \"lucide-react\"\nimport { auth } from \"@/lib/auth\"\nimport type { User } from \"@/lib/auth\"\n\ninterface LoginFormProps {\n  onSuccess?: (user: User) => void\n  onError?: (error: string) => void\n  redirectUrl?: string\n  onSwitchToRegister?: () => void\n}\n\nexport default function LoginForm({ onSuccess, onError, redirectUrl, onSwitchToRegister }: LoginFormProps) {\n  const [showPassword, setShowPassword] = useState(false)\n  const [isLoading, setIsLoading] = useState(false)\n  const [error, setError] = useState(\"\")\n  const [email, setEmail] = useState(\"\")\n  const [password, setPassword] = useState(\"\")\n  const [staySignedIn, setStaySignedIn] = useState(true) // Default to true for better UX\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    \n    if (!email || !password) {\n      setError(\"Please fill in all fields\")\n      return\n    }\n\n    setIsLoading(true)\n    setError(\"\")\n\n    try {\n      // Update session configuration based on user preference\n      if (staySignedIn) {\n        // Enable persistent sessions with longer refresh intervals\n        auth.updateSessionConfig({\n          refreshThreshold: 10, // Refresh 10 minutes before expiration\n          checkInterval: 5, // Check every 5 minutes\n          maxRefreshAttempts: 5\n        });\n      } else {\n        // Use shorter sessions for temporary login\n        auth.updateSessionConfig({\n          refreshThreshold: 2, // Refresh 2 minutes before expiration\n          checkInterval: 1, // Check every minute\n          maxRefreshAttempts: 2\n        });\n      }\n\n      const user = await auth.login({ email, password }, staySignedIn)\n      console.log(\"Login successful:\", user)\n      onSuccess?.(user)\n      \n      // Redirect after a short delay\n      if (redirectUrl) {\n        setTimeout(() => {\n          window.location.href = redirectUrl\n        }, 1000)\n      }\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : \"Login failed\"\n      setError(errorMessage)\n      onError?.(errorMessage)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <Card className=\"w-full max-w-sm sm:max-w-md mx-auto border-none shadow-none\">\n      <CardHeader className=\"space-y-1 px-2 sm:px-6 pt-3 sm:pt-6\">\n        <CardTitle className=\"text-base sm:text-xl lg:text-2xl font-bold text-center\">Welcome Back</CardTitle>\n        <CardDescription className=\"text-center text-xs sm:text-sm lg:text-base\">Enter your credentials to access your account</CardDescription>\n      </CardHeader>\n      <form onSubmit={handleSubmit}>\n        <CardContent className=\"space-y-2 sm:space-y-4 px-2 sm:px-6\">\n          {error && (\n            <div className=\"p-2 text-xs sm:text-sm text-red-600 bg-red-50 border border-red-200 rounded-md\">\n              {error}\n            </div>\n          )}\n          \n          <div className=\"space-y-1\">\n            <Label htmlFor=\"email\" className=\"text-xs sm:text-sm lg:text-base\">Email</Label>\n            <Input \n              id=\"email\" \n              name=\"email\" \n              type=\"email\" \n              placeholder=\"john.doe@example.com\" \n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              required \n              disabled={isLoading}\n              className=\"h-9 sm:h-11 text-base sm:text-base\"\n            />\n          </div>\n\n          <div className=\"space-y-1 mb-2 sm:mb-4\">\n            <Label htmlFor=\"password\" className=\"text-xs sm:text-sm lg:text-base\">Password</Label>\n            <div className=\"relative\">\n              <Input\n                id=\"password\"\n                name=\"password\"\n                type={showPassword ? \"text\" : \"password\"}\n                placeholder=\"Enter your password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                required\n                disabled={isLoading}\n                className=\"h-9 sm:h-11 text-base sm:text-base pr-10 sm:pr-12\"\n              />\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                size=\"sm\"\n                className=\"absolute right-0 top-0 h-full px-2 py-1 sm:px-3 sm:py-2 hover:bg-transparent min-h-0\"\n                onClick={() => setShowPassword(!showPassword)}\n                disabled={isLoading}\n              >\n                {showPassword ? <EyeOff className=\"h-3 w-3 sm:h-4 sm:w-4\" /> : <Eye className=\"h-3 w-3 sm:h-4 sm:w-4\" />}\n                <span className=\"sr-only\">{showPassword ? \"Hide password\" : \"Show password\"}</span>\n              </Button>\n            </div>\n          </div>\n\n          {/* Stay signed in checkbox */}\n          <div className=\"flex items-center space-x-2\">\n            <Checkbox\n              id=\"staySignedIn\"\n              checked={staySignedIn}\n              onCheckedChange={(checked) => setStaySignedIn(checked as boolean)}\n              disabled={isLoading}\n            />\n            <Label \n              htmlFor=\"staySignedIn\" \n              className=\"text-xs sm:text-sm text-muted-foreground cursor-pointer\"\n            >\n              Stay signed in\n            </Label>\n          </div>\n          \n          {staySignedIn && (\n            <p className=\"text-xs text-muted-foreground\">\n              You'll remain signed in until you manually sign out or your session expires.\n            </p>\n          )}\n        </CardContent>\n\n        <CardFooter className=\"flex flex-col space-y-2 sm:space-y-4 px-2 sm:px-6 pb-3 sm:pb-6\">\n          <Button type=\"submit\" className=\"w-full h-9 sm:h-11 text-sm sm:text-base\" disabled={isLoading}>\n            {isLoading ? (\n              <>\n                <Loader2 className=\"mr-2 h-3 w-3 sm:h-4 sm:w-4 animate-spin\" />\n                Signing in...\n              </>\n            ) : (\n              \"Sign In\"\n            )}\n          </Button>\n          <p className=\"text-xs sm:text-sm text-center text-muted-foreground\">\n            Don't have an account?{\" \"}\n            <button \n              type=\"button\"\n              onClick={onSwitchToRegister}\n              className=\"text-primary hover:underline font-medium\"\n            >\n              Create account\n            </button>\n          </p>\n        </CardFooter>\n      </form>\n    </Card>\n  )\n} "],"names":["error"],"mappings":"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"}